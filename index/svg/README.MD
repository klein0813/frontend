# SVG

SVG是一种XML语言，类似XHTML，可以用来绘制矢量图形。SVG可以通过定义必要的线和形状来创建一个图形，也可以修改已有的位图，或者将这两种方式结合起来创建图形。图形和其组成部分可以形变（be transformed）、合成、或者通过滤镜完全改变外观。

- 加载慢是SVG的一个缺点
- 不同的浏览器支持SVG标准的程度不同：可能用一个工具调试正常后，却在另外一个浏览器中无法正常显示
- SVG也提供了一些元素，用于定义圆形、矩形、简单或复杂的曲线

## 坐标定位

以页面的左上角为(0,0)坐标点，坐标以像素为单位，x轴正方向是向右，y轴正方向是向下

- 基本上，在 SVG 文档中的1个像素对应输出设备（比如显示屏）上的1个像素
- `<svg width="200" height="200" viewBox="0 0 100 100">`
  - viewBox属性定义了画布上可以显示的区域：从(0,0)点开始，100宽\*100高的区域，这个100\*100的区域，会放到200\*200的画布上显示。于是就形成了放大两倍的效果
- 用户单位和屏幕单位的映射关系被称为用户坐标系统

## 基本形状

- 矩形 - rect
  - x: 矩形左上角的x位置
  - y: 矩形左上角的y位置
  - width: 矩形的宽度
  - height: 矩形的高度
  - rx: 圆角的x方位的半径
  - ry: 圆角的y方位的半径
- 圆形 - circle
  - r: 圆的半径
  - cx: 圆心的x位置
  - cy: 圆心的y位置
- 椭圆 - Ellipse
  - rx: 椭圆的x半径
  - ry: 椭圆的y半径
  - cx: 椭圆中心的x位置
  - cy: 椭圆中心的y位置
- 线条 - Line
  - x1: 起点的x位置
  - y1: 起点的y位置
  - x2: 终点的x位置
  - y2: 终点的y位置
  - 备注：显示线需要设置 stroke（图边）
- 折线 - Polyline

  Polyline是一组连接在一起的直线。因为它可以有很多的点，折线的的所有点位置都放在一个points属性中
  - points：点集数列。每个数字用空白、逗号、终止命令符或者换行符分隔开。每个点必须包含2个数字，一个是x坐标，一个是y坐标
- 多边形 - Polygon

  polygon和折线很像，它们都是由连接一组点集的直线构成。不同的是，polygon的路径在最后一个点处自动回到第一个点
  - points：点集数列。每个数字用空白、逗号、终止命令符或者换行符分隔开。每个点必须包含2个数字，一个是x坐标，一个是y坐标。路径绘制完后闭合图形
- 路径 - path

path可能是SVG中最常见的形状。你可以用path元素绘制矩形（直角矩形或者圆角矩形）、圆形、椭圆、折线形、多边形，以及一些其他的形状，例如贝塞尔曲线、2次曲线等曲线

## 路径 - path

`path` 元素是SVG基本形状中最强大的一个。你可以用它创建线条, 曲线, 弧形等等

- 不建议使用XML编辑器或文本编辑器创建复杂的路径
- path元素的形状是通过属性d定义的，属性d的值是一个“命令+参数”的序列
- 命令都有两种表示方式，一种是用大写字母，表示采用绝对定位。另一种是用小写字母，表示采用相对定位

### 命令

- 直线命令

  - M x y (m dx dy)
    - M命令仅仅是移动画笔，但不画线
  - L x y (or l dx dy)
    - 命令将会在当前位置和新位置（L前面画笔所在的点）之间画一条线段
  - H x (or h dx)
  - V y (or v dy)
    - 用来绘制水平线和垂直线
  - Z (or z)：闭合路径命令

- 曲线命令

  绘制平滑曲线的命令有三个，其中两个用来绘制贝塞尔曲线，另外一个用来绘制弧形或者说是圆的一部分

  - 贝塞尔曲线

    - 三次贝塞尔曲线
      - C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)
      - (x,y)表示的是曲线的终点
      - (x1,y1)是起点的控制点
      - (x2,y2)是终点的控制点
    - S x2 y2, x y (or s dx2 dy2, dx dy)
      - 如果S命令跟在一个C或S命令后面，则它的第一个控制点会被假设成前一个命令曲线的第二个控制点的中心对称点
      - 如果S命令单独使用，前面没有C或S命令，那当前点将作为第一个控制点
    - 二次贝塞尔曲线
      - Q x1 y1, x y (or q dx1 dy1, dx dy)
      - 控制点和终点坐标
    - 就像三次贝塞尔曲线有一个S命令，二次贝塞尔曲线有一个差不多的T命令，可以通过更简短的参数，延长二次贝塞尔曲线
      - T x y (or t dx dy)
      - T命令前面必须是一个Q命令，或者是另一个T命令，才能达到这种效果。如果T单独使用，那么控制点就会被认为和终点是同一个点，所以画出来的将是一条直线
    - 虽然三次贝塞尔曲线拥有更大的自由度，但是两种曲线能达到的效果总是差不多的。具体使用哪种曲线，通常取决于需求，以及对曲线对称性的依赖程度

  - 弧形

    - 弧形命令A是另一个创建SVG曲线的命令。基本上，弧形可以视为圆形或椭圆形的一部分
    - A rx ry x-axis-rotation large-arc-flag sweep-flag x y
    - a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy
      - 第三个参数表示弧形的旋转情况(负为逆时针)
      - large-arc-flag（角度大小）：决定弧线是大于还是小于180度，0表示小角度弧，1表示大角度弧
      - sweep-flag（弧线方向）：表示弧线的方向，0表示从起点到终点沿逆时针画弧，1表示从起点到终点沿顺时针画弧
      - 两个参数是指定弧形的终点

## 填充和边框

可以使用几种方法来着色（包括指定对象的属性）使用内联CSS样式、内嵌CSS样式，或者使用外部CSS样式文件。大多数的web网站的SVG使用的是内联样式CSS，对于这些方法都有优缺点

### 填充

- fill 属性设置对象内部的颜色
  - fill-opacity 控制填充色的不透明度
- stroke 属性设置绘制对象的线条的颜色
  - stroke-opacity 控制描边的不透明度
- 可以使用在HTML中的CSS颜色命名方案定义它们的颜色。为了浏览器兼容，最好将它和填充/描边的不透明度分开使用

### 描边

- stroke-width 属性定义了描边的宽度
  - 描边是以路径为中心线绘制的
- stroke-linecap 属性控制边框终点的形状
  - butt 用直边结束线段，它是常规做法，线段边界90度垂直于描边的方向、贯穿它的终点
  - square 的效果差不多，但是会稍微超出实际路径的范围，超出的大小由 stroke-width 控制
  - round 表示边框的终点是圆角，圆角的半径也是由 stroke-width 控制的
- stroke-linejoin 属性，用来控制两条描边线段之间，用什么方式连接
  - miter 是默认值，表示用方形画笔在连接处形成尖角
  - round 表示用圆角连接，实现平滑效果
  - bevel，连接处会形成一个斜接
- stroke-dasharray 属性将虚线类型应用在描边上
  - 参数是一组用逗号分割的数字组成的数列
  - 每一组数字，第一个用来表示填色区域的长度，第二个用来表示非填色区域的长度
- stroke-miterlimit 定义什么情况下绘制或不绘制边框连接的miter效果
- stroke-dashoffset 定义虚线开始的位置

### 使用CSS

[SVG规范](https://www.w3.org/TR/SVG/propidx.html)将属性区分成properties和其他attributes，前者是可以用CSS设置的，后者不能。渐变和图案等均不支持CSS

- 利用style属性插入到元素的行间

  ```svg
    <rect x="10" height="180" y="10" width="180" style="stroke: black; fill: red;"/>
  ```

- 利用 `<style>` 设置一段样式段落

  ```svg
    <defs>
      <style type="text/css"><![CDATA[
        #MyRect {
          stroke: black;
          fill: red;
        }
      ]]></style>
    </defs>
    <rect x="10" height="180" y="10" width="180" id="MyRect"/>
  ```

> 一些可以在html里使用的css，在svg里可能无法正常工作，比如before和after伪类。所以这里需要一点经验

- 可以定义一个外部的样式表，但是要符合[normal XML-stylesheet syntax](https://www.w3.org/TR/xml-stylesheet/)的CSS规则

  ```svg
    <?xml version="1.0" standalone="no"?>
    <?xml-stylesheet type="text/css" href="style.css"?>
  ```

## 渐变

可以创建和并在填充和描边上应用渐变色。有两种类型的渐变：线性渐变和径向渐变。你必须给渐变内容指定一个id属性，否则文档内的其他元素就不能引用它。为了让渐变能被重复使用，渐变内容需要定义在 `<defs>` 标签内部，而不是定义在形状上面

### 线性渐变

### 径向渐变

## Patterns(图案)


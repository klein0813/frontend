!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s="POsN")}({POsN:function(t,e){let i;self.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"init":i=new class{constructor(t,e,i){this.neighboursI=new Int32Array([-1,-1,0,1,1,1,0,-1]),this.neighboursJ=new Int32Array([0,1,1,1,0,-1,-1,-1]),this.neighbours_={},this.color="co_brown",this.minDimension=48,this.maxDimension=.9*e,this.minGroupSize=2304,this.color=t||this.color,this.windowWidth=e,this.windowHeight=i}calculateDimensions_(t,e){let i=-1,n=-1,r=1/0,s=1/0;for(let o=0;o<e;o+=2){const e=t[o],h=t[o+1];e<r&&(r=e),e>i&&(i=e),h<s&&(s=h),h>n&&(n=h)}return{width:i-r,height:n-s,x:r,y:s,maxx:i,maxy:n}}getMinDimension(){return this.minDimension}getMaxDimension(){return this.maxDimension}getMinGroupSize(){return this.minGroupSize}getNeighboursForWidth_(t){if(this.neighbours_[t])return this.neighbours_[t];const e=new Int32Array(8);return e[0]=4*-t,e[1]=4*-t+4,e[2]=4,e[3]=4*t+4,e[4]=4*t,e[5]=4*t-4,e[6]=-4,e[7]=4*-t-4,this.neighbours_[t]=e,e}mergeRectangles_(t){let e,i=[];const n=this.getMinDimension(),r=this.getMaxDimension();for(let w=0;w<t.length;w++){let m=t[w];e=!0;for(let i=w+1;i<t.length;i++){let n=t[i];if(s=m.x,o=m.y,h=m.x+m.width,a=m.y+m.height,l=n.x,g=n.y,c=n.x+n.width,u=n.y+n.height,!(l>h||c<s||g>a||u<o)){e=!1;let t=Math.min(m.x,n.x),i=Math.min(m.y,n.y),r=Math.max(m.x+m.width,n.x+n.width),s=Math.max(m.y+m.height,n.y+n.height);n.height=s-i,n.width=r-t,n.x=t,n.y=i;break}}e&&m.width>=n&&m.height>=n&&m.width<=r&&m.height<=r&&i.push(m)}var s,o,h,a,l,g,c,u;return i}track(t,e,i){let n=this.trackColor_(t,e,i,this.color),r=-1,s=-1;return n.forEach((t,e)=>{t.width>s&&(s=t.width,r=e)}),-1===r?{}:n[r]}trackColor_(t,e,i){let n,r,s,o,h,a=new Int32Array(t.length>>2),l=new Int8Array(t.length),g=this.getMinGroupSize(),c=this.getNeighboursForWidth_(e),u=new Int32Array(t.length),w=[],m=-4;for(let b=0;b<i;b++)for(let p=0;p<e;p++)if(!l[m+=4]){for(n=0,h=-1,u[++h]=m,u[++h]=b,u[++h]=p,l[m]=1;h>=0;)if(s=u[h--],r=u[h--],o=u[h--],d=t[o],f=t[o+1],x=t[o+2],t[o+3],d<=64&&d-f>16&&f>x){a[n++]=s,a[n++]=r;for(let t=0;t<c.length;t++){let n=o+c[t],a=r+this.neighboursI[t],g=s+this.neighboursJ[t];!l[n]&&a>=0&&a<i&&g>=0&&g<e&&(u[++h]=n,u[++h]=a,u[++h]=g,l[n]=1)}}if(n>=g){let t=this.calculateDimensions_(a,n);t.width>=48&&t.height>=48&&t.width<.9*this.windowWidth&&t.height<.9*this.windowHeight&&(w.push(t),t.color=this.color)}}var d,f,x;return this.mergeRectangles_(w)}}("co_brown",e.msg.windowWidth,e.msg.windowHeight);break;case"start":const{color:t}=i.track(e.msg.pixels,e.msg.width,e.msg.height);self.postMessage("co_brown"===t?"bottle":"can");break;case"stop":self.close();break;default:self.postMessage("Unknown command: "+e.msg)}},!1)}});
//# sourceMappingURL=Worker.50bc8adf202b5b0dc194.js.map